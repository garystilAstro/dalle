<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>miro image generator</title>
    <link rel="stylesheet" href="static/dalle-render-0808.css">
</head>
<body>
    <h1>miro image generator</h1>
    <form id="image-form">
        <div class="form-group">
            <label for="prompt">enter your prompt:</label>
            <input type="text" id="prompt" name="prompt" placeholder="type your message..." required>
        </div>
        <div class="form-group">
            <label for="size">Size:</label>
            <select id="size" name="size">
                <option value="1024x1024">1024x1024</option>
                <option value="1024x1792">1024x1792</option>
                <option value="1792x1024">1792x1024</option>
            </select>
        </div>
        <div class="form-group">
            <label for="quality">quality:</label>
            <input type="text" id="quality" name="quality" value="standard" placeholder="e.g., high, standard, low">
        </div>
        <div class="form-group">
            <label for="n">number of images:</label>
            <input type="number" id="n" name="n" value="1" min="1" max="10" step="1">
        </div>
        <div class="form-group">
            <button type="submit">generate image</button>
        </div>
    </form>
    <div class="image-container" id="image-container">
        <!-- Images will be displayed here -->
    </div>

    <script>
        const form = document.getElementById('image-form');
        const imageContainer = document.getElementById('image-container');

        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            const prompt = document.getElementById('prompt').value.trim();
            const size = document.getElementById('size').value.trim();
            const quality = document.getElementById('quality').value.trim();
            const n = document.getElementById('n').value.trim();

            try {
                const response = await fetch('/generate_image', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        size: size,
                        quality: quality,
                        n: parseInt(n)
                    })
                });

                if (!response.ok) {
                    throw new Error(`Failed to generate image: ${response.statusText}`);
                }

                const result = await response.json();
                const imageUrls = result.image_urls;

                // Clear previous images
                imageContainer.innerHTML = '';

                // Display the generated images
                imageUrls.forEach(url => {
                    const imgElement = document.createElement('img');
                    imgElement.src = url;
                    imgElement.classList.add('generated-image');
                    imageContainer.appendChild(imgElement);
                });

            } catch (error) {
                console.error('Error generating image:', error);
                alert(`Error generating image: ${error.message}`);
            }
        });
    </script>
</body>
</html>
